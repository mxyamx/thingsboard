<!--

    Copyright © 2016-2026 The Thingsboard Authors

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->



<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > MqttClientConfig</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.thingsboard.mqtt</a>
</div>

<h1>Coverage Summary for Class: MqttClientConfig (org.thingsboard.mqtt)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">MqttClientConfig</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/7)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/16)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/34)
  </span>
</td>
</tr>
  <tr>
    <td class="name">MqttClientConfig$RetransmissionConfig</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/6)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/9)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/22)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/42)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/**
&nbsp; * Copyright © 2016-2026 The Thingsboard Authors
&nbsp; *
&nbsp; * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
&nbsp; * you may not use this file except in compliance with the License.
&nbsp; * You may obtain a copy of the License at
&nbsp; *
&nbsp; *     http://www.apache.org/licenses/LICENSE-2.0
&nbsp; *
&nbsp; * Unless required by applicable law or agreed to in writing, software
&nbsp; * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
&nbsp; * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
&nbsp; * See the License for the specific language governing permissions and
&nbsp; * limitations under the License.
&nbsp; */
&nbsp;package org.thingsboard.mqtt;
&nbsp;
&nbsp;import io.netty.channel.Channel;
&nbsp;import io.netty.channel.socket.nio.NioSocketChannel;
&nbsp;import io.netty.handler.codec.mqtt.MqttVersion;
&nbsp;import io.netty.handler.ssl.SslContext;
&nbsp;import jakarta.annotation.Nonnull;
&nbsp;import jakarta.annotation.Nullable;
&nbsp;import lombok.Getter;
&nbsp;import lombok.Setter;
&nbsp;
&nbsp;import java.util.Random;
&nbsp;
&nbsp;@SuppressWarnings({&quot;WeakerAccess&quot;, &quot;unused&quot;})
&nbsp;public final class MqttClientConfig {
&nbsp;
&nbsp;    @Getter
&nbsp;    private final SslContext sslContext;
&nbsp;    private final String randomClientId;
&nbsp;
&nbsp;    @Getter
&nbsp;    @Setter
&nbsp;    private String ownerId; // [TenantId][IntegrationId] or [TenantId][RuleNodeId] for exceptions logging purposes
&nbsp;    @Nonnull
&nbsp;    @Getter
&nbsp;    private String clientId;
<b class="nc">&nbsp;    @Getter</b>
&nbsp;    private int timeoutSeconds = 60;
<b class="nc">&nbsp;    @Getter</b>
&nbsp;    private MqttVersion protocolVersion = MqttVersion.MQTT_3_1;
<b class="nc">&nbsp;    @Nullable</b>
&nbsp;    @Getter
&nbsp;    @Setter
&nbsp;    private String username = null;
<b class="nc">&nbsp;    @Nullable</b>
&nbsp;    @Getter
&nbsp;    @Setter
&nbsp;    private String password = null;
<b class="nc">&nbsp;    @Getter</b>
&nbsp;    @Setter
&nbsp;    private boolean cleanSession = true;
&nbsp;    @Nullable
&nbsp;    @Getter
&nbsp;    @Setter
&nbsp;    private MqttLastWill lastWill;
<b class="nc">&nbsp;    @Setter</b>
&nbsp;    @Getter
&nbsp;    private Class&lt;? extends Channel&gt; channelClass = NioSocketChannel.class;
&nbsp;
<b class="nc">&nbsp;    @Getter</b>
&nbsp;    @Setter
&nbsp;    private boolean reconnect = true;
<b class="nc">&nbsp;    @Getter</b>
&nbsp;    private long reconnectDelay = 1L;
<b class="nc">&nbsp;    @Getter</b>
&nbsp;    private int maxBytesInMessage = 8092;
&nbsp;
&nbsp;    @Getter
&nbsp;    @Setter
&nbsp;    private RetransmissionConfig retransmissionConfig;
&nbsp;
<b class="nc">&nbsp;    public record RetransmissionConfig(int maxAttempts, long initialDelayMillis, double jitterFactor) {</b>
&nbsp;
<b class="nc">&nbsp;        public RetransmissionConfig {</b>
<b class="nc">&nbsp;            if (maxAttempts &lt; 0) {</b>
<b class="nc">&nbsp;                throw new IllegalArgumentException(&quot;Max retransmission attempts (maxAttempts) must be zero or greater, but was &quot; + maxAttempts);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (initialDelayMillis &lt; 0) {</b>
<b class="nc">&nbsp;                throw new IllegalArgumentException(&quot;Initial retransmission delay (initialDelayMillis) must be zero or greater, but was &quot; + initialDelayMillis);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (jitterFactor &lt; 0) {</b>
<b class="nc">&nbsp;                throw new IllegalArgumentException(&quot;Jitter factor (jitterFactor) must be zero or greater, but was &quot; + jitterFactor);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    public MqttClientConfig() {
<b class="nc">&nbsp;        this(null);</b>
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    public MqttClientConfig(SslContext sslContext) {</b>
<b class="nc">&nbsp;        this.sslContext = sslContext;</b>
<b class="nc">&nbsp;        Random random = new Random();</b>
<b class="nc">&nbsp;        StringBuilder id = new StringBuilder(&quot;netty-mqtt/&quot;);</b>
<b class="nc">&nbsp;        String[] options = &quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&quot;.split(&quot;&quot;);</b>
<b class="nc">&nbsp;        for (int i = 0; i &lt; 8; i++) {</b>
<b class="nc">&nbsp;            id.append(options[random.nextInt(options.length)]);</b>
&nbsp;        }
<b class="nc">&nbsp;        this.clientId = id.toString();</b>
<b class="nc">&nbsp;        this.randomClientId = id.toString();</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setClientId(@Nullable String clientId) {
<b class="nc">&nbsp;        if (clientId == null) {</b>
<b class="nc">&nbsp;            this.clientId = randomClientId;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            this.clientId = clientId;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public void setTimeoutSeconds(int timeoutSeconds) {
<b class="nc">&nbsp;        if (timeoutSeconds != -1 &amp;&amp; timeoutSeconds &lt;= 0) {</b>
<b class="nc">&nbsp;            throw new IllegalArgumentException(&quot;timeoutSeconds must be &gt; 0 or -1&quot;);</b>
&nbsp;        }
<b class="nc">&nbsp;        this.timeoutSeconds = timeoutSeconds;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setProtocolVersion(MqttVersion protocolVersion) {
<b class="nc">&nbsp;        if (protocolVersion == null) {</b>
<b class="nc">&nbsp;            throw new NullPointerException(&quot;protocolVersion&quot;);</b>
&nbsp;        }
<b class="nc">&nbsp;        this.protocolVersion = protocolVersion;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Sets the reconnect delay in seconds. Defaults to 1 second.
&nbsp;     * @param reconnectDelay
&nbsp;     * @throws IllegalArgumentException if reconnectDelay is smaller than 1.
&nbsp;     */
&nbsp;    public void setReconnectDelay(long reconnectDelay) {
<b class="nc">&nbsp;        if (reconnectDelay &lt;= 0) {</b>
<b class="nc">&nbsp;            throw new IllegalArgumentException(&quot;reconnectDelay must be &gt; 0&quot;);</b>
&nbsp;        }
<b class="nc">&nbsp;        this.reconnectDelay = reconnectDelay;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Sets the maximum number of bytes in the message for the {@link io.netty.handler.codec.mqtt.MqttDecoder}.
&nbsp;     * Default value is 8092 as specified by Netty. The absolute maximum size is 256MB as set by the MQTT spec.
&nbsp;     *
&nbsp;     * @param maxBytesInMessage
&nbsp;     * @throws IllegalArgumentException if maxBytesInMessage is smaller than 1 or greater than 256_000_000.
&nbsp;     */
&nbsp;    public void setMaxBytesInMessage(int maxBytesInMessage) {
<b class="nc">&nbsp;        if (maxBytesInMessage &lt;= 0 || maxBytesInMessage &gt; 256_000_000) {</b>
<b class="nc">&nbsp;            throw new IllegalArgumentException(&quot;maxBytesInMessage must be &gt; 0 or &lt; 256_000_000&quot;);</b>
&nbsp;        }
<b class="nc">&nbsp;        this.maxBytesInMessage = maxBytesInMessage;</b>
&nbsp;    }
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2026-02-07 20:03</div>
</div>
</body>
</html>
