<!--

    Copyright © 2016-2026 The Thingsboard Authors

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->



<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > TenantIdLoader</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.thingsboard.rule.engine.util</a>
</div>

<h1>Coverage Summary for Class: TenantIdLoader (org.thingsboard.rule.engine.util)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">TenantIdLoader</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/42)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/47)
  </span>
</td>
</tr>
  <tr>
    <td class="name">TenantIdLoader$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/42)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/48)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/**
&nbsp; * Copyright © 2016-2026 The Thingsboard Authors
&nbsp; *
&nbsp; * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
&nbsp; * you may not use this file except in compliance with the License.
&nbsp; * You may obtain a copy of the License at
&nbsp; *
&nbsp; *     http://www.apache.org/licenses/LICENSE-2.0
&nbsp; *
&nbsp; * Unless required by applicable law or agreed to in writing, software
&nbsp; * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
&nbsp; * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
&nbsp; * See the License for the specific language governing permissions and
&nbsp; * limitations under the License.
&nbsp; */
&nbsp;package org.thingsboard.rule.engine.util;
&nbsp;
&nbsp;import org.thingsboard.rule.engine.api.TbContext;
&nbsp;import org.thingsboard.server.common.data.EntityType;
&nbsp;import org.thingsboard.server.common.data.HasTenantId;
&nbsp;import org.thingsboard.server.common.data.id.AiModelId;
&nbsp;import org.thingsboard.server.common.data.id.AlarmId;
&nbsp;import org.thingsboard.server.common.data.id.ApiKeyId;
&nbsp;import org.thingsboard.server.common.data.id.ApiUsageStateId;
&nbsp;import org.thingsboard.server.common.data.id.AssetId;
&nbsp;import org.thingsboard.server.common.data.id.AssetProfileId;
&nbsp;import org.thingsboard.server.common.data.id.CalculatedFieldId;
&nbsp;import org.thingsboard.server.common.data.id.CustomerId;
&nbsp;import org.thingsboard.server.common.data.id.DashboardId;
&nbsp;import org.thingsboard.server.common.data.id.DeviceId;
&nbsp;import org.thingsboard.server.common.data.id.DeviceProfileId;
&nbsp;import org.thingsboard.server.common.data.id.DomainId;
&nbsp;import org.thingsboard.server.common.data.id.EdgeId;
&nbsp;import org.thingsboard.server.common.data.id.EntityId;
&nbsp;import org.thingsboard.server.common.data.id.EntityViewId;
&nbsp;import org.thingsboard.server.common.data.id.JobId;
&nbsp;import org.thingsboard.server.common.data.id.MobileAppBundleId;
&nbsp;import org.thingsboard.server.common.data.id.MobileAppId;
&nbsp;import org.thingsboard.server.common.data.id.NotificationRequestId;
&nbsp;import org.thingsboard.server.common.data.id.NotificationRuleId;
&nbsp;import org.thingsboard.server.common.data.id.NotificationTargetId;
&nbsp;import org.thingsboard.server.common.data.id.NotificationTemplateId;
&nbsp;import org.thingsboard.server.common.data.id.OAuth2ClientId;
&nbsp;import org.thingsboard.server.common.data.id.OtaPackageId;
&nbsp;import org.thingsboard.server.common.data.id.QueueId;
&nbsp;import org.thingsboard.server.common.data.id.QueueStatsId;
&nbsp;import org.thingsboard.server.common.data.id.RpcId;
&nbsp;import org.thingsboard.server.common.data.id.RuleChainId;
&nbsp;import org.thingsboard.server.common.data.id.RuleNodeId;
&nbsp;import org.thingsboard.server.common.data.id.TbResourceId;
&nbsp;import org.thingsboard.server.common.data.id.TenantId;
&nbsp;import org.thingsboard.server.common.data.id.UserId;
&nbsp;import org.thingsboard.server.common.data.id.WidgetTypeId;
&nbsp;import org.thingsboard.server.common.data.id.WidgetsBundleId;
&nbsp;import org.thingsboard.server.common.data.rule.RuleNode;
&nbsp;
&nbsp;import java.util.UUID;
&nbsp;
<b class="nc">&nbsp;public class TenantIdLoader {</b>
&nbsp;
&nbsp;    public static TenantId findTenantId(TbContext ctx, EntityId entityId) {
<b class="nc">&nbsp;        UUID id = entityId.getId();</b>
<b class="nc">&nbsp;        EntityType entityType = entityId.getEntityType();</b>
<b class="nc">&nbsp;        TenantId ctxTenantId = ctx.getTenantId();</b>
&nbsp;
&nbsp;        HasTenantId tenantEntity;
<b class="nc">&nbsp;        switch (entityType) {</b>
&nbsp;            case TENANT:
<b class="nc">&nbsp;                return TenantId.fromUUID(id);</b>
&nbsp;            case CUSTOMER:
<b class="nc">&nbsp;                tenantEntity = ctx.getCustomerService().findCustomerById(ctxTenantId, new CustomerId(id));</b>
&nbsp;                break;
&nbsp;            case USER:
<b class="nc">&nbsp;                tenantEntity = ctx.getUserService().findUserById(ctxTenantId, new UserId(id));</b>
&nbsp;                break;
&nbsp;            case ASSET:
<b class="nc">&nbsp;                tenantEntity = ctx.getAssetService().findAssetById(ctxTenantId, new AssetId(id));</b>
&nbsp;                break;
&nbsp;            case DEVICE:
<b class="nc">&nbsp;                tenantEntity = ctx.getDeviceService().findDeviceById(ctxTenantId, new DeviceId(id));</b>
&nbsp;                break;
&nbsp;            case ALARM:
<b class="nc">&nbsp;                tenantEntity = ctx.getAlarmService().findAlarmById(ctxTenantId, new AlarmId(id));</b>
&nbsp;                break;
&nbsp;            case RULE_CHAIN:
<b class="nc">&nbsp;                tenantEntity = ctx.getRuleChainService().findRuleChainById(ctxTenantId, new RuleChainId(id));</b>
&nbsp;                break;
&nbsp;            case ENTITY_VIEW:
<b class="nc">&nbsp;                tenantEntity = ctx.getEntityViewService().findEntityViewById(ctxTenantId, new EntityViewId(id));</b>
&nbsp;                break;
&nbsp;            case DASHBOARD:
<b class="nc">&nbsp;                tenantEntity = ctx.getDashboardService().findDashboardById(ctxTenantId, new DashboardId(id));</b>
&nbsp;                break;
&nbsp;            case EDGE:
<b class="nc">&nbsp;                tenantEntity = ctx.getEdgeService().findEdgeById(ctxTenantId, new EdgeId(id));</b>
&nbsp;                break;
&nbsp;            case OTA_PACKAGE:
<b class="nc">&nbsp;                tenantEntity = ctx.getOtaPackageService().findOtaPackageInfoById(ctxTenantId, new OtaPackageId(id));</b>
&nbsp;                break;
&nbsp;            case ASSET_PROFILE:
<b class="nc">&nbsp;                tenantEntity = ctx.getAssetProfileCache().get(ctxTenantId, new AssetProfileId(id));</b>
&nbsp;                break;
&nbsp;            case DEVICE_PROFILE:
<b class="nc">&nbsp;                tenantEntity = ctx.getDeviceProfileCache().get(ctxTenantId, new DeviceProfileId(id));</b>
&nbsp;                break;
&nbsp;            case WIDGET_TYPE:
<b class="nc">&nbsp;                tenantEntity = ctx.getWidgetTypeService().findWidgetTypeById(ctxTenantId, new WidgetTypeId(id));</b>
&nbsp;                break;
&nbsp;            case WIDGETS_BUNDLE:
<b class="nc">&nbsp;                tenantEntity = ctx.getWidgetBundleService().findWidgetsBundleById(ctxTenantId, new WidgetsBundleId(id));</b>
&nbsp;                break;
&nbsp;            case RPC:
<b class="nc">&nbsp;                tenantEntity = ctx.getRpcService().findRpcById(ctxTenantId, new RpcId(id));</b>
&nbsp;                break;
&nbsp;            case QUEUE:
<b class="nc">&nbsp;                tenantEntity = ctx.getQueueService().findQueueById(ctxTenantId, new QueueId(id));</b>
&nbsp;                break;
&nbsp;            case API_USAGE_STATE:
<b class="nc">&nbsp;                tenantEntity = ctx.getRuleEngineApiUsageStateService().findApiUsageStateById(ctxTenantId, new ApiUsageStateId(id));</b>
&nbsp;                break;
&nbsp;            case TB_RESOURCE:
<b class="nc">&nbsp;                tenantEntity = ctx.getResourceService().findResourceInfoById(ctxTenantId, new TbResourceId(id));</b>
&nbsp;                break;
&nbsp;            case RULE_NODE:
<b class="nc">&nbsp;                RuleNode ruleNode = ctx.getRuleChainService().findRuleNodeById(ctxTenantId, new RuleNodeId(id));</b>
<b class="nc">&nbsp;                if (ruleNode != null) {</b>
<b class="nc">&nbsp;                    tenantEntity = ctx.getRuleChainService().findRuleChainById(ctxTenantId, ruleNode.getRuleChainId());</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    tenantEntity = null;</b>
&nbsp;                }
&nbsp;                break;
&nbsp;            case TENANT_PROFILE:
<b class="nc">&nbsp;                if (ctx.getTenantProfile().getId().equals(entityId)) {</b>
<b class="nc">&nbsp;                    return ctxTenantId;</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    tenantEntity = null;</b>
&nbsp;                }
&nbsp;                break;
&nbsp;            case NOTIFICATION_TARGET:
<b class="nc">&nbsp;                tenantEntity = ctx.getNotificationTargetService().findNotificationTargetById(ctxTenantId, new NotificationTargetId(id));</b>
&nbsp;                break;
&nbsp;            case NOTIFICATION_TEMPLATE:
<b class="nc">&nbsp;                tenantEntity = ctx.getNotificationTemplateService().findNotificationTemplateById(ctxTenantId, new NotificationTemplateId(id));</b>
&nbsp;                break;
&nbsp;            case NOTIFICATION_REQUEST:
<b class="nc">&nbsp;                tenantEntity = ctx.getNotificationRequestService().findNotificationRequestById(ctxTenantId, new NotificationRequestId(id));</b>
&nbsp;                break;
&nbsp;            case NOTIFICATION:
&nbsp;            case ADMIN_SETTINGS:
<b class="nc">&nbsp;                return ctxTenantId;</b>
&nbsp;            case NOTIFICATION_RULE:
<b class="nc">&nbsp;                tenantEntity = ctx.getNotificationRuleService().findNotificationRuleById(ctxTenantId, new NotificationRuleId(id));</b>
&nbsp;                break;
&nbsp;            case QUEUE_STATS:
<b class="nc">&nbsp;                tenantEntity = ctx.getQueueStatsService().findQueueStatsById(ctxTenantId, new QueueStatsId(id));</b>
&nbsp;                break;
&nbsp;            case OAUTH2_CLIENT:
<b class="nc">&nbsp;                tenantEntity = ctx.getOAuth2ClientService().findOAuth2ClientById(ctxTenantId, new OAuth2ClientId(id));</b>
&nbsp;                break;
&nbsp;            case DOMAIN:
<b class="nc">&nbsp;                tenantEntity = ctx.getDomainService().findDomainById(ctxTenantId, new DomainId(id));</b>
&nbsp;                break;
&nbsp;            case MOBILE_APP:
<b class="nc">&nbsp;                tenantEntity = ctx.getMobileAppService().findMobileAppById(ctxTenantId, new MobileAppId(id));</b>
&nbsp;                break;
&nbsp;            case MOBILE_APP_BUNDLE:
<b class="nc">&nbsp;                tenantEntity = ctx.getMobileAppBundleService().findMobileAppBundleById(ctxTenantId, new MobileAppBundleId(id));</b>
&nbsp;                break;
&nbsp;            case CALCULATED_FIELD:
<b class="nc">&nbsp;                tenantEntity = ctx.getCalculatedFieldService().findById(ctxTenantId, new CalculatedFieldId(id));</b>
&nbsp;                break;
&nbsp;            case JOB:
<b class="nc">&nbsp;                tenantEntity = ctx.getJobService().findJobById(ctxTenantId, new JobId(id));</b>
&nbsp;                break;
&nbsp;            case AI_MODEL:
<b class="nc">&nbsp;                tenantEntity = ctx.getAiModelService().findAiModelById(ctxTenantId, new AiModelId(id)).orElse(null);</b>
&nbsp;                break;
&nbsp;            case API_KEY:
<b class="nc">&nbsp;                tenantEntity = ctx.getApiKeyService().findApiKeyById(ctxTenantId, new ApiKeyId(id));</b>
&nbsp;                break;
&nbsp;            default:
<b class="nc">&nbsp;                throw new RuntimeException(&quot;Unexpected entity type: &quot; + entityId.getEntityType());</b>
&nbsp;        }
<b class="nc">&nbsp;        return tenantEntity != null ? tenantEntity.getTenantId() : null;</b>
&nbsp;    }
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2026-02-07 20:03</div>
</div>
</body>
</html>
