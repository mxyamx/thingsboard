<!--

    Copyright © 2016-2026 The Thingsboard Authors

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->



<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > DashboardInfoRepository</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.thingsboard.server.dao.sql.dashboard</a>
</div>

<h1>Coverage Summary for Class: DashboardInfoRepository (org.thingsboard.server.dao.sql.dashboard)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
</tr>
<tr>
  <td class="name">DashboardInfoRepository</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/**
&nbsp; * Copyright © 2016-2026 The Thingsboard Authors
&nbsp; *
&nbsp; * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
&nbsp; * you may not use this file except in compliance with the License.
&nbsp; * You may obtain a copy of the License at
&nbsp; *
&nbsp; *     http://www.apache.org/licenses/LICENSE-2.0
&nbsp; *
&nbsp; * Unless required by applicable law or agreed to in writing, software
&nbsp; * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
&nbsp; * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
&nbsp; * See the License for the specific language governing permissions and
&nbsp; * limitations under the License.
&nbsp; */
&nbsp;package org.thingsboard.server.dao.sql.dashboard;
&nbsp;
&nbsp;import org.springframework.data.domain.Page;
&nbsp;import org.springframework.data.domain.Pageable;
&nbsp;import org.springframework.data.jpa.repository.JpaRepository;
&nbsp;import org.springframework.data.jpa.repository.Query;
&nbsp;import org.springframework.data.repository.query.Param;
&nbsp;import org.thingsboard.server.common.data.DashboardInfo;
&nbsp;import org.thingsboard.server.common.data.EntityInfo;
&nbsp;import org.thingsboard.server.dao.model.sql.DashboardInfoEntity;
&nbsp;
&nbsp;import java.util.List;
&nbsp;import java.util.UUID;
&nbsp;
&nbsp;/**
&nbsp; * Created by Valerii Sosliuk on 5/6/2017.
&nbsp; */
&nbsp;public interface DashboardInfoRepository extends JpaRepository&lt;DashboardInfoEntity, UUID&gt; {
&nbsp;
&nbsp;    DashboardInfoEntity findFirstByTenantIdAndTitle(UUID tenantId, String title);
&nbsp;
&nbsp;    @Query(&quot;SELECT di FROM DashboardInfoEntity di WHERE di.tenantId = :tenantId &quot; +
&nbsp;            &quot;AND (:searchText IS NULL OR ilike(di.title, CONCAT(&#39;%&#39;, :searchText, &#39;%&#39;)) = true)&quot;)
&nbsp;    Page&lt;DashboardInfoEntity&gt; findByTenantId(@Param(&quot;tenantId&quot;) UUID tenantId,
&nbsp;                                             @Param(&quot;searchText&quot;) String searchText,
&nbsp;                                             Pageable pageable);
&nbsp;
&nbsp;    @Query(&quot;SELECT di FROM DashboardInfoEntity di WHERE di.tenantId = :tenantId &quot; +
&nbsp;            &quot;AND di.mobileHide = false &quot; +
&nbsp;            &quot;AND (:searchText IS NULL OR ilike(di.title, CONCAT(&#39;%&#39;, :searchText, &#39;%&#39;)) = true)&quot;)
&nbsp;    Page&lt;DashboardInfoEntity&gt; findMobileByTenantId(@Param(&quot;tenantId&quot;) UUID tenantId,
&nbsp;                                                   @Param(&quot;searchText&quot;) String searchText,
&nbsp;                                                   Pageable pageable);
&nbsp;
&nbsp;    @Query(&quot;SELECT di FROM DashboardInfoEntity di, RelationEntity re WHERE di.tenantId = :tenantId &quot; +
&nbsp;            &quot;AND di.id = re.toId AND re.toType = &#39;DASHBOARD&#39; AND re.relationTypeGroup = &#39;DASHBOARD&#39; &quot; +
&nbsp;            &quot;AND re.relationType = &#39;Contains&#39; AND re.fromId = :customerId AND re.fromType = &#39;CUSTOMER&#39; &quot; +
&nbsp;            &quot;AND (:searchText IS NULL OR ilike(di.title, CONCAT(&#39;%&#39;, :searchText, &#39;%&#39;)) = true)&quot;)
&nbsp;    Page&lt;DashboardInfoEntity&gt; findByTenantIdAndCustomerId(@Param(&quot;tenantId&quot;) UUID tenantId,
&nbsp;                                                          @Param(&quot;customerId&quot;) UUID customerId,
&nbsp;                                                          @Param(&quot;searchText&quot;) String searchText,
&nbsp;                                                          Pageable pageable);
&nbsp;
&nbsp;    @Query(&quot;SELECT di FROM DashboardInfoEntity di, RelationEntity re WHERE di.tenantId = :tenantId &quot; +
&nbsp;            &quot;AND di.mobileHide = false &quot; +
&nbsp;            &quot;AND di.id = re.toId AND re.toType = &#39;DASHBOARD&#39; AND re.relationTypeGroup = &#39;DASHBOARD&#39; &quot; +
&nbsp;            &quot;AND re.relationType = &#39;Contains&#39; AND re.fromId = :customerId AND re.fromType = &#39;CUSTOMER&#39; &quot; +
&nbsp;            &quot;AND (:searchText IS NULL OR ilike(di.title, CONCAT(&#39;%&#39;, :searchText, &#39;%&#39;)) = true)&quot;)
&nbsp;    Page&lt;DashboardInfoEntity&gt; findMobileByTenantIdAndCustomerId(@Param(&quot;tenantId&quot;) UUID tenantId,
&nbsp;                                                          @Param(&quot;customerId&quot;) UUID customerId,
&nbsp;                                                          @Param(&quot;searchText&quot;) String searchText,
&nbsp;                                                          Pageable pageable);
&nbsp;
&nbsp;    @Query(&quot;SELECT di FROM DashboardInfoEntity di, RelationEntity re WHERE di.tenantId = :tenantId &quot; +
&nbsp;            &quot;AND di.id = re.toId AND re.toType = &#39;DASHBOARD&#39; AND re.relationTypeGroup = &#39;EDGE&#39; &quot; +
&nbsp;            &quot;AND re.relationType = &#39;Contains&#39; AND re.fromId = :edgeId AND re.fromType = &#39;EDGE&#39; &quot; +
&nbsp;            &quot;AND (:searchText IS NULL OR ilike(di.title, CONCAT(&#39;%&#39;, :searchText, &#39;%&#39;)) = true)&quot;)
&nbsp;    Page&lt;DashboardInfoEntity&gt; findByTenantIdAndEdgeId(@Param(&quot;tenantId&quot;) UUID tenantId,
&nbsp;                                                      @Param(&quot;edgeId&quot;) UUID edgeId,
&nbsp;                                                      @Param(&quot;searchText&quot;) String searchText,
&nbsp;                                                      Pageable pageable);
&nbsp;
&nbsp;    @Query(&quot;SELECT di.title FROM DashboardInfoEntity di WHERE di.tenantId = :tenantId AND di.id = :dashboardId&quot;)
&nbsp;    String findTitleByTenantIdAndId(@Param(&quot;tenantId&quot;) UUID tenantId, @Param(&quot;dashboardId&quot;) UUID dashboardId);
&nbsp;
&nbsp;    @Query(nativeQuery = true,
&nbsp;            value = &quot;SELECT * FROM dashboard d WHERE d.tenant_id = :tenantId &quot; +
&nbsp;                    &quot;and (d.image = :imageLink or d.configuration ILIKE CONCAT(&#39;%\&quot;&#39;, :imageLink, &#39;\&quot;%&#39;)) limit :limit&quot;
&nbsp;    )
&nbsp;    List&lt;DashboardInfoEntity&gt; findByTenantAndImageLink(@Param(&quot;tenantId&quot;) UUID tenantId, @Param(&quot;imageLink&quot;) String imageLink, @Param(&quot;limit&quot;) int limit);
&nbsp;
&nbsp;    @Query(nativeQuery = true,
&nbsp;            value = &quot;SELECT * FROM dashboard d WHERE d.image = :imageLink or d.configuration ILIKE CONCAT(&#39;%\&quot;&#39;, :imageLink, &#39;\&quot;%&#39;) limit :limit&quot;
&nbsp;    )
&nbsp;    List&lt;DashboardInfoEntity&gt; findByImageLink(@Param(&quot;imageLink&quot;) String imageLink, @Param(&quot;limit&quot;) int limit);
&nbsp;
&nbsp;    @Query(&quot;SELECT new org.thingsboard.server.common.data.EntityInfo(d.id, &#39;DASHBOARD&#39;, d.title) &quot; +
&nbsp;            &quot;FROM DashboardEntity d WHERE d.tenantId = :tenantId AND ilike(cast(d.configuration as string), CONCAT(&#39;%&#39;, :link, &#39;%&#39;)) = true&quot;)
&nbsp;    List&lt;EntityInfo&gt; findDashboardInfosByTenantIdAndResourceLink(@Param(&quot;tenantId&quot;) UUID tenantId,
&nbsp;                                                                 @Param(&quot;link&quot;) String link,
&nbsp;                                                                 Pageable pageable);
&nbsp;
&nbsp;    @Query(&quot;SELECT new org.thingsboard.server.common.data.EntityInfo(d.id, &#39;DASHBOARD&#39;, d.title) &quot; +
&nbsp;            &quot;FROM DashboardEntity d WHERE ilike(cast(d.configuration as string), CONCAT(&#39;%&#39;, :link, &#39;%&#39;)) = true&quot;)
&nbsp;    List&lt;EntityInfo&gt; findDashboardInfosByResourceLink(@Param(&quot;link&quot;) String link,
&nbsp;                                                      Pageable pageable);
&nbsp;
&nbsp;    List&lt;DashboardInfoEntity&gt; findByIdIn(List&lt;UUID&gt; dashboardIds);
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2026-02-07 20:03</div>
</div>
</body>
</html>
