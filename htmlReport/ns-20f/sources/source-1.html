<!--

    Copyright © 2016-2026 The Thingsboard Authors

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->



<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > LwM2MClientSerDes</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.thingsboard.server.transport.lwm2m.server.store.util</a>
</div>

<h1>Coverage Summary for Class: LwM2MClientSerDes (org.thingsboard.server.transport.lwm2m.server.store.util)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">LwM2MClientSerDes</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/15)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/68)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/196)
  </span>
</td>
</tr>
  <tr>
    <td class="name">LwM2MClientSerDes$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/16)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/68)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/197)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/**
&nbsp; * Copyright © 2016-2026 The Thingsboard Authors
&nbsp; *
&nbsp; * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
&nbsp; * you may not use this file except in compliance with the License.
&nbsp; * You may obtain a copy of the License at
&nbsp; *
&nbsp; *     http://www.apache.org/licenses/LICENSE-2.0
&nbsp; *
&nbsp; * Unless required by applicable law or agreed to in writing, software
&nbsp; * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
&nbsp; * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
&nbsp; * See the License for the specific language governing permissions and
&nbsp; * limitations under the License.
&nbsp; */
&nbsp;package org.thingsboard.server.transport.lwm2m.server.store.util;
&nbsp;
&nbsp;
&nbsp;import com.fasterxml.jackson.databind.JsonNode;
&nbsp;import com.google.gson.JsonElement;
&nbsp;import com.google.gson.JsonObject;
&nbsp;import com.google.gson.JsonParser;
&nbsp;import com.google.protobuf.util.JsonFormat;
&nbsp;import lombok.SneakyThrows;
&nbsp;import org.eclipse.leshan.core.LwM2m.Version;
&nbsp;import org.eclipse.leshan.core.model.ResourceModel;
&nbsp;import org.eclipse.leshan.core.node.LwM2mMultipleResource;
&nbsp;import org.eclipse.leshan.core.node.LwM2mNodeException;
&nbsp;import org.eclipse.leshan.core.node.LwM2mResource;
&nbsp;import org.eclipse.leshan.core.node.LwM2mSingleResource;
&nbsp;import org.eclipse.leshan.core.node.ObjectLink;
&nbsp;import org.eclipse.leshan.core.util.datatype.ULong;
&nbsp;import org.eclipse.leshan.server.redis.serialization.RegistrationSerDes;
&nbsp;import org.thingsboard.server.common.data.device.data.PowerMode;
&nbsp;import org.thingsboard.server.common.data.id.TenantId;
&nbsp;import org.thingsboard.server.gen.transport.TransportProtos;
&nbsp;import org.thingsboard.server.transport.lwm2m.server.client.LwM2MClientState;
&nbsp;import org.thingsboard.server.transport.lwm2m.server.client.LwM2mClient;
&nbsp;import org.thingsboard.server.transport.lwm2m.server.client.ResourceValue;
&nbsp;
&nbsp;import java.lang.reflect.Field;
&nbsp;import java.time.Instant;
&nbsp;import java.util.Base64;
&nbsp;import java.util.Date;
&nbsp;import java.util.HashMap;
&nbsp;import java.util.Map;
&nbsp;import java.util.Map.Entry;
&nbsp;import java.util.UUID;
&nbsp;import java.util.concurrent.atomic.AtomicLong;
&nbsp;
&nbsp;import static org.thingsboard.common.util.JacksonUtil.toJsonNode;
&nbsp;
<b class="nc">&nbsp;public class LwM2MClientSerDes {</b>
&nbsp;    public static final String VALUE = &quot;value&quot;;
<b class="nc">&nbsp;    private static final RegistrationSerDes registrationSerDes = new RegistrationSerDes();</b>
&nbsp;
<b class="nc">&nbsp;    @SneakyThrows</b>
&nbsp;    public static byte[] serialize(LwM2mClient client) {
<b class="nc">&nbsp;        JsonObject o = new JsonObject();</b>
<b class="nc">&nbsp;        o.addProperty(&quot;nodeId&quot;, client.getNodeId());</b>
<b class="nc">&nbsp;        o.addProperty(&quot;endpoint&quot;, client.getEndpoint());</b>
&nbsp;
<b class="nc">&nbsp;        JsonObject resources = new JsonObject();</b>
<b class="nc">&nbsp;        client.getResources().forEach((k, v) -&gt; {</b>
<b class="nc">&nbsp;            JsonObject resourceValue = new JsonObject();</b>
<b class="nc">&nbsp;            resourceValue.add(&quot;lwM2mResource&quot;, serialize(v.getLwM2mResource()));</b>
<b class="nc">&nbsp;            resourceValue.add(&quot;resourceModel&quot;, serialize(v.getResourceModel()));</b>
<b class="nc">&nbsp;            resources.add(k, resourceValue);</b>
&nbsp;        });
<b class="nc">&nbsp;        o.add(&quot;resources&quot;, resources);</b>
<b class="nc">&nbsp;        JsonObject sharedAttributes = new JsonObject();</b>
&nbsp;
<b class="nc">&nbsp;        for (Map.Entry&lt;String, TransportProtos.TsKvProto&gt; entry : client.getSharedAttributes().entrySet()) {</b>
<b class="nc">&nbsp;            sharedAttributes.addProperty(entry.getKey(), JsonFormat.printer().print(entry.getValue()));</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        o.add(&quot;sharedAttributes&quot;, sharedAttributes);</b>
<b class="nc">&nbsp;        JsonObject keyTsLatestMap = new JsonObject();</b>
<b class="nc">&nbsp;        client.getKeyTsLatestMap().forEach((k, v) -&gt; {</b>
<b class="nc">&nbsp;            keyTsLatestMap.addProperty(k, v.get());</b>
&nbsp;        });
<b class="nc">&nbsp;        o.add(&quot;keyTsLatestMap&quot;, keyTsLatestMap);</b>
&nbsp;
<b class="nc">&nbsp;        o.addProperty(&quot;state&quot;, client.getState().toString());</b>
&nbsp;
<b class="nc">&nbsp;        if (client.getSession() != null) {</b>
<b class="nc">&nbsp;            o.addProperty(&quot;session&quot;, JsonFormat.printer().print(client.getSession()));</b>
&nbsp;        }
<b class="nc">&nbsp;        if (client.getTenantId() != null) {</b>
<b class="nc">&nbsp;            o.addProperty(&quot;tenantId&quot;, client.getTenantId().toString());</b>
&nbsp;        }
<b class="nc">&nbsp;        if (client.getDeviceId() != null) {</b>
<b class="nc">&nbsp;            o.addProperty(&quot;deviceId&quot;, client.getDeviceId().toString());</b>
&nbsp;        }
<b class="nc">&nbsp;        if (client.getProfileId() != null) {</b>
<b class="nc">&nbsp;            o.addProperty(&quot;profileId&quot;, client.getProfileId().toString());</b>
&nbsp;        }
<b class="nc">&nbsp;        if (client.getPowerMode() != null) {</b>
<b class="nc">&nbsp;            o.addProperty(&quot;powerMode&quot;, client.getPowerMode().toString());</b>
&nbsp;        }
<b class="nc">&nbsp;        if (client.getEdrxCycle() != null) {</b>
<b class="nc">&nbsp;            o.addProperty(&quot;edrxCycle&quot;, client.getEdrxCycle());</b>
&nbsp;        }
<b class="nc">&nbsp;        if (client.getPsmActivityTimer() != null) {</b>
<b class="nc">&nbsp;            o.addProperty(&quot;psmActivityTimer&quot;, client.getPsmActivityTimer());</b>
&nbsp;        }
<b class="nc">&nbsp;        if (client.getPagingTransmissionWindow() != null) {</b>
<b class="nc">&nbsp;            o.addProperty(&quot;pagingTransmissionWindow&quot;, client.getPagingTransmissionWindow());</b>
&nbsp;        }
<b class="nc">&nbsp;        o.addProperty(&quot;defaultObjectIDVer&quot;, client.getDefaultObjectIDVer().toString());</b>
&nbsp;
<b class="nc">&nbsp;        if (client.getRegistration() != null) {</b>
<b class="nc">&nbsp;            JsonNode registrationNode = registrationSerDes.jSerialize(client.getRegistration());</b>
<b class="nc">&nbsp;            o.addProperty(&quot;registration&quot;, registrationNode.toString());</b>
&nbsp;        }
<b class="nc">&nbsp;        o.addProperty(&quot;asleep&quot;, client.isAsleep());</b>
<b class="nc">&nbsp;        o.addProperty(&quot;lastUplinkTime&quot;, client.getLastUplinkTime());</b>
&nbsp;
<b class="nc">&nbsp;        Field firstEdrxDownlink = LwM2mClient.class.getDeclaredField(&quot;firstEdrxDownlink&quot;);</b>
<b class="nc">&nbsp;        firstEdrxDownlink.setAccessible(true);</b>
<b class="nc">&nbsp;        o.addProperty(&quot;firstEdrxDownlink&quot;, (boolean) firstEdrxDownlink.get(client));</b>
<b class="nc">&nbsp;        o.addProperty(&quot;retryAttempts&quot;, client.getRetryAttempts().get());</b>
&nbsp;
<b class="nc">&nbsp;        if (client.getLastSentRpcId() != null) {</b>
<b class="nc">&nbsp;            o.addProperty(&quot;lastSentRpcId&quot;, client.getLastSentRpcId().toString());</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return o.toString().getBytes();</b>
&nbsp;    }
&nbsp;
&nbsp;    private static JsonObject serialize(LwM2mResource resource) {
<b class="nc">&nbsp;        JsonObject o = new JsonObject();</b>
<b class="nc">&nbsp;        o.addProperty(&quot;id&quot;, resource.getId());</b>
<b class="nc">&nbsp;        o.addProperty(&quot;type&quot;, resource.getType().toString());</b>
<b class="nc">&nbsp;        if (resource.isMultiInstances()) {</b>
<b class="nc">&nbsp;            o.addProperty(&quot;multiInstances&quot;, true);</b>
<b class="nc">&nbsp;            JsonObject instances = new JsonObject();</b>
<b class="nc">&nbsp;            resource.getInstances().forEach((id, in) -&gt; {</b>
<b class="nc">&nbsp;                JsonObject instance = new JsonObject();</b>
<b class="nc">&nbsp;                instance.addProperty(&quot;id&quot;, in.getId());</b>
<b class="nc">&nbsp;                addValue(instance, in.getType(), in.getValue());</b>
<b class="nc">&nbsp;                instances.add(id.toString(), instance);</b>
&nbsp;            });
<b class="nc">&nbsp;            o.add(&quot;instances&quot;, instances);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            o.addProperty(&quot;multiInstances&quot;, false);</b>
<b class="nc">&nbsp;            addValue(o, resource.getType(), resource.getValue());</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return o;</b>
&nbsp;    }
&nbsp;
&nbsp;    private static LwM2mResource parseLwM2mResource(JsonObject o) {
<b class="nc">&nbsp;        boolean multiInstances = o.get(&quot;multiInstances&quot;).getAsBoolean();</b>
<b class="nc">&nbsp;        int id = o.get(&quot;id&quot;).getAsInt();</b>
<b class="nc">&nbsp;        ResourceModel.Type type = ResourceModel.Type.valueOf(o.get(&quot;type&quot;).getAsString());</b>
<b class="nc">&nbsp;        if (multiInstances) {</b>
<b class="nc">&nbsp;            Map&lt;Integer, Object&gt; instances = new HashMap&lt;&gt;();</b>
<b class="nc">&nbsp;            for (Entry&lt;String, JsonElement&gt; entry : o.get(&quot;instances&quot;).getAsJsonObject().entrySet()) {</b>
<b class="nc">&nbsp;                JsonObject instance = entry.getValue().getAsJsonObject();</b>
<b class="nc">&nbsp;                instances.put(Integer.valueOf(instance.get(&quot;id&quot;).getAsString()), parseValue(type, instance.get(VALUE)));</b>
&nbsp;            }
<b class="nc">&nbsp;            return LwM2mMultipleResource.newResource(id, instances, type);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            return LwM2mSingleResource.newResource(id, parseValue(type, o.get(VALUE)));</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    private static Object parseValue(ResourceModel.Type type, JsonElement value) {
<b class="nc">&nbsp;        switch (type) {</b>
&nbsp;            case INTEGER:
<b class="nc">&nbsp;                return value.getAsInt();</b>
&nbsp;            case FLOAT:
<b class="nc">&nbsp;                return value.getAsDouble();</b>
&nbsp;            case BOOLEAN:
<b class="nc">&nbsp;                return value.getAsBoolean();</b>
&nbsp;            case OPAQUE:
<b class="nc">&nbsp;                return Base64.getDecoder().decode(value.getAsString());</b>
&nbsp;            case STRING:
<b class="nc">&nbsp;                return value.getAsString();</b>
&nbsp;            case TIME:
<b class="nc">&nbsp;                return new Date(value.getAsLong());</b>
&nbsp;            case OBJLNK:
<b class="nc">&nbsp;                return ObjectLink.decodeFromString(value.getAsString());</b>
&nbsp;            case UNSIGNED_INTEGER:
<b class="nc">&nbsp;                return ULong.valueOf(value.getAsString());</b>
&nbsp;            default:
<b class="nc">&nbsp;                throw new LwM2mNodeException(String.format(&quot;Type %s is not supported&quot;, type.name()));</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    private static JsonObject serialize(ResourceModel resourceModel) {
<b class="nc">&nbsp;        JsonObject o = new JsonObject();</b>
<b class="nc">&nbsp;        o.addProperty(&quot;id&quot;, resourceModel.id);</b>
<b class="nc">&nbsp;        o.addProperty(&quot;name&quot;, resourceModel.name);</b>
<b class="nc">&nbsp;        o.addProperty(&quot;operations&quot;, resourceModel.operations.toString());</b>
<b class="nc">&nbsp;        o.addProperty(&quot;multiple&quot;, resourceModel.multiple);</b>
<b class="nc">&nbsp;        o.addProperty(&quot;mandatory&quot;, resourceModel.mandatory);</b>
<b class="nc">&nbsp;        o.addProperty(&quot;type&quot;, resourceModel.type.toString());</b>
<b class="nc">&nbsp;        o.addProperty(&quot;rangeEnumeration&quot;, resourceModel.rangeEnumeration);</b>
<b class="nc">&nbsp;        o.addProperty(&quot;units&quot;, resourceModel.units);</b>
<b class="nc">&nbsp;        o.addProperty(&quot;description&quot;, resourceModel.description);</b>
<b class="nc">&nbsp;        return o;</b>
&nbsp;    }
&nbsp;
&nbsp;    private static ResourceModel parseResourceModel(JsonObject o) {
<b class="nc">&nbsp;        Integer id = o.get(&quot;id&quot;).getAsInt();</b>
<b class="nc">&nbsp;        String name = o.get(&quot;name&quot;).getAsString();</b>
<b class="nc">&nbsp;        ResourceModel.Operations operations = ResourceModel.Operations.valueOf(o.get(&quot;operations&quot;).getAsString());</b>
<b class="nc">&nbsp;        Boolean multiple = o.get(&quot;multiple&quot;).getAsBoolean();</b>
<b class="nc">&nbsp;        Boolean mandatory = o.get(&quot;mandatory&quot;).getAsBoolean();</b>
<b class="nc">&nbsp;        ResourceModel.Type type = ResourceModel.Type.valueOf(o.get(&quot;type&quot;).getAsString());</b>
<b class="nc">&nbsp;        String rangeEnumeration = o.get(&quot;rangeEnumeration&quot;).getAsString();</b>
<b class="nc">&nbsp;        String units = o.get(&quot;units&quot;).getAsString();</b>
<b class="nc">&nbsp;        String description = o.get(&quot;description&quot;).getAsString();</b>
<b class="nc">&nbsp;        return new ResourceModel(id, name, operations, multiple, mandatory, type, rangeEnumeration, units, description);</b>
&nbsp;    }
&nbsp;
&nbsp;    private static void addValue(JsonObject o, ResourceModel.Type type, Object value) {
<b class="nc">&nbsp;        switch (type) {</b>
&nbsp;            case INTEGER:
<b class="nc">&nbsp;                o.addProperty(VALUE, (Long) value);</b>
&nbsp;                break;
&nbsp;            case FLOAT:
<b class="nc">&nbsp;                o.addProperty(VALUE, (Double) value);</b>
&nbsp;                break;
&nbsp;            case BOOLEAN:
<b class="nc">&nbsp;                o.addProperty(VALUE, (Boolean) value);</b>
&nbsp;                break;
&nbsp;            case OPAQUE:
<b class="nc">&nbsp;                o.addProperty(VALUE, Base64.getEncoder().encodeToString((byte[]) value));</b>
&nbsp;                break;
&nbsp;            case STRING:
<b class="nc">&nbsp;                o.addProperty(VALUE, String.valueOf(value));</b>
&nbsp;                break;
&nbsp;            case TIME:
<b class="nc">&nbsp;                o.addProperty(VALUE, ((Date) value).getTime());</b>
&nbsp;                break;
&nbsp;            case OBJLNK:
<b class="nc">&nbsp;                o.addProperty(VALUE, ((ObjectLink) value).encodeToString());</b>
&nbsp;                break;
&nbsp;            case UNSIGNED_INTEGER:
<b class="nc">&nbsp;                o.addProperty(VALUE, Integer.toUnsignedString((int) value));</b>
&nbsp;                break;
&nbsp;            default:
<b class="nc">&nbsp;                throw new LwM2mNodeException(String.format(&quot;Type %s is not supported&quot;, type.name()));</b>
&nbsp;        }
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    @SneakyThrows</b>
&nbsp;    public static LwM2mClient deserialize(byte[] data) {
<b class="nc">&nbsp;        JsonObject o = JsonParser.parseString(new String(data)).getAsJsonObject();</b>
<b class="nc">&nbsp;        LwM2mClient lwM2mClient = new LwM2mClient(o.get(&quot;nodeId&quot;).getAsString(), o.get(&quot;endpoint&quot;).getAsString());</b>
&nbsp;
<b class="nc">&nbsp;        o.get(&quot;resources&quot;).getAsJsonObject().entrySet().forEach(entry -&gt; {</b>
<b class="nc">&nbsp;            JsonObject resource = entry.getValue().getAsJsonObject();</b>
<b class="nc">&nbsp;            LwM2mResource lwM2mResource = parseLwM2mResource(resource.get(&quot;lwM2mResource&quot;).getAsJsonObject());</b>
<b class="nc">&nbsp;            ResourceModel resourceModel = parseResourceModel(resource.get(&quot;resourceModel&quot;).getAsJsonObject());</b>
<b class="nc">&nbsp;            ResourceValue resourceValue = new ResourceValue(lwM2mResource, resourceModel);</b>
<b class="nc">&nbsp;            lwM2mClient.getResources().put(String.valueOf(lwM2mResource.getId()), resourceValue);</b>
&nbsp;        });
&nbsp;
<b class="nc">&nbsp;        for (Entry&lt;String, JsonElement&gt; entry : o.get(&quot;sharedAttributes&quot;).getAsJsonObject().entrySet()) {</b>
<b class="nc">&nbsp;            TransportProtos.TsKvProto.Builder builder = TransportProtos.TsKvProto.newBuilder();</b>
<b class="nc">&nbsp;            JsonFormat.parser().merge(entry.getValue().getAsString(), builder);</b>
<b class="nc">&nbsp;            lwM2mClient.getSharedAttributes().put(entry.getKey(), builder.build());</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        o.get(&quot;keyTsLatestMap&quot;).getAsJsonObject().entrySet().forEach(entry -&gt; {</b>
<b class="nc">&nbsp;            lwM2mClient.getKeyTsLatestMap().put(entry.getKey(), new AtomicLong(entry.getValue().getAsLong()));</b>
&nbsp;        });
&nbsp;
<b class="nc">&nbsp;        lwM2mClient.setState(LwM2MClientState.valueOf(o.get(&quot;state&quot;).getAsString()));</b>
&nbsp;
<b class="nc">&nbsp;        Class&lt;LwM2mClient&gt; lwM2mClientClass = LwM2mClient.class;</b>
&nbsp;
<b class="nc">&nbsp;        JsonElement session = o.get(&quot;session&quot;);</b>
<b class="nc">&nbsp;        if (session != null) {</b>
<b class="nc">&nbsp;            TransportProtos.SessionInfoProto.Builder builder = TransportProtos.SessionInfoProto.newBuilder();</b>
<b class="nc">&nbsp;            JsonFormat.parser().merge(session.getAsString(), builder);</b>
&nbsp;
<b class="nc">&nbsp;            Field sessionField = lwM2mClientClass.getDeclaredField(&quot;session&quot;);</b>
<b class="nc">&nbsp;            sessionField.setAccessible(true);</b>
<b class="nc">&nbsp;            sessionField.set(lwM2mClient, builder.build());</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JsonElement tenantId = o.get(&quot;tenantId&quot;);</b>
<b class="nc">&nbsp;        if (tenantId != null) {</b>
<b class="nc">&nbsp;            Field tenantIdField = lwM2mClientClass.getDeclaredField(&quot;tenantId&quot;);</b>
<b class="nc">&nbsp;            tenantIdField.setAccessible(true);</b>
<b class="nc">&nbsp;            tenantIdField.set(lwM2mClient, TenantId.fromUUID(UUID.fromString(tenantId.getAsString())));</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JsonElement deviceId = o.get(&quot;deviceId&quot;);</b>
<b class="nc">&nbsp;        if (tenantId != null) {</b>
<b class="nc">&nbsp;            Field deviceIdField = lwM2mClientClass.getDeclaredField(&quot;deviceId&quot;);</b>
<b class="nc">&nbsp;            deviceIdField.setAccessible(true);</b>
<b class="nc">&nbsp;            deviceIdField.set(lwM2mClient, UUID.fromString(deviceId.getAsString()));</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JsonElement profileId = o.get(&quot;profileId&quot;);</b>
<b class="nc">&nbsp;        if (tenantId != null) {</b>
<b class="nc">&nbsp;            Field profileIdField = lwM2mClientClass.getDeclaredField(&quot;profileId&quot;);</b>
<b class="nc">&nbsp;            profileIdField.setAccessible(true);</b>
<b class="nc">&nbsp;            profileIdField.set(lwM2mClient, UUID.fromString(profileId.getAsString()));</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JsonElement powerMode = o.get(&quot;powerMode&quot;);</b>
<b class="nc">&nbsp;        if (powerMode != null) {</b>
<b class="nc">&nbsp;            Field powerModeField = lwM2mClientClass.getDeclaredField(&quot;powerMode&quot;);</b>
<b class="nc">&nbsp;            powerModeField.setAccessible(true);</b>
<b class="nc">&nbsp;            powerModeField.set(lwM2mClient, PowerMode.valueOf(powerMode.getAsString()));</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JsonElement edrxCycle = o.get(&quot;edrxCycle&quot;);</b>
<b class="nc">&nbsp;        if (edrxCycle != null) {</b>
<b class="nc">&nbsp;            Field edrxCycleField = lwM2mClientClass.getDeclaredField(&quot;edrxCycle&quot;);</b>
<b class="nc">&nbsp;            edrxCycleField.setAccessible(true);</b>
<b class="nc">&nbsp;            edrxCycleField.set(lwM2mClient, edrxCycle.getAsLong());</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JsonElement psmActivityTimer = o.get(&quot;psmActivityTimer&quot;);</b>
<b class="nc">&nbsp;        if (psmActivityTimer != null) {</b>
<b class="nc">&nbsp;            Field psmActivityTimerField = lwM2mClientClass.getDeclaredField(&quot;psmActivityTimer&quot;);</b>
<b class="nc">&nbsp;            psmActivityTimerField.setAccessible(true);</b>
<b class="nc">&nbsp;            psmActivityTimerField.set(lwM2mClient, psmActivityTimer.getAsLong());</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JsonElement pagingTransmissionWindow = o.get(&quot;pagingTransmissionWindow&quot;);</b>
<b class="nc">&nbsp;        if (pagingTransmissionWindow != null) {</b>
<b class="nc">&nbsp;            Field pagingTransmissionWindowField = lwM2mClientClass.getDeclaredField(&quot;pagingTransmissionWindow&quot;);</b>
<b class="nc">&nbsp;            pagingTransmissionWindowField.setAccessible(true);</b>
<b class="nc">&nbsp;            pagingTransmissionWindowField.set(lwM2mClient, pagingTransmissionWindow.getAsLong());</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JsonElement defaultObjectIDVer = o.get(&quot;defaultObjectIDVer&quot;);</b>
<b class="nc">&nbsp;        if (defaultObjectIDVer != null) {</b>
<b class="nc">&nbsp;            Field defaultObjectIDVerField = lwM2mClientClass.getDeclaredField(&quot;defaultObjectIDVer&quot;);</b>
<b class="nc">&nbsp;            defaultObjectIDVerField.setAccessible(true);</b>
<b class="nc">&nbsp;            defaultObjectIDVerField.set(lwM2mClient, new Version(defaultObjectIDVer.getAsString()));</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JsonElement registration = o.get(&quot;registration&quot;);</b>
<b class="nc">&nbsp;        if (registration != null) {</b>
<b class="nc">&nbsp;            lwM2mClient.setRegistration(registrationSerDes.deserialize(toJsonNode(registration.getAsString())));</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        lwM2mClient.setAsleep(o.get(&quot;asleep&quot;).getAsBoolean());</b>
&nbsp;
<b class="nc">&nbsp;        Field lastUplinkTimeField = lwM2mClientClass.getDeclaredField(&quot;lastUplinkTime&quot;);</b>
<b class="nc">&nbsp;        lastUplinkTimeField.setAccessible(true);</b>
<b class="nc">&nbsp;        lastUplinkTimeField.setLong(lwM2mClient, o.get(&quot;lastUplinkTime&quot;).getAsLong());</b>
&nbsp;
<b class="nc">&nbsp;        Field firstEdrxDownlinkField = lwM2mClientClass.getDeclaredField(&quot;firstEdrxDownlink&quot;);</b>
<b class="nc">&nbsp;        firstEdrxDownlinkField.setAccessible(true);</b>
<b class="nc">&nbsp;        firstEdrxDownlinkField.setBoolean(lwM2mClient, o.get(&quot;firstEdrxDownlink&quot;).getAsBoolean());</b>
&nbsp;
<b class="nc">&nbsp;        lwM2mClient.getRetryAttempts().set(o.get(&quot;retryAttempts&quot;).getAsInt());</b>
&nbsp;
<b class="nc">&nbsp;        JsonElement lastSentRpcId = o.get(&quot;lastSentRpcId&quot;);</b>
<b class="nc">&nbsp;        if (lastSentRpcId != null) {</b>
<b class="nc">&nbsp;            lwM2mClient.setLastSentRpcId(UUID.fromString(lastSentRpcId.getAsString()));</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return lwM2mClient;</b>
&nbsp;    }
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2026-02-07 20:03</div>
</div>
</body>
</html>
