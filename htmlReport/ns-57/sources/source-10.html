<!--

    Copyright © 2016-2026 The Thingsboard Authors

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->



<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > Device</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.thingsboard.server.common.data</a>
</div>

<h1>Coverage Summary for Class: Device (org.thingsboard.server.common.data)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">Device</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (27/27)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (10/10)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    98.3%
  </span>
  <span class="absValue">
    (58/59)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/**
&nbsp; * Copyright © 2016-2026 The Thingsboard Authors
&nbsp; *
&nbsp; * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
&nbsp; * you may not use this file except in compliance with the License.
&nbsp; * You may obtain a copy of the License at
&nbsp; *
&nbsp; *     http://www.apache.org/licenses/LICENSE-2.0
&nbsp; *
&nbsp; * Unless required by applicable law or agreed to in writing, software
&nbsp; * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
&nbsp; * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
&nbsp; * See the License for the specific language governing permissions and
&nbsp; * limitations under the License.
&nbsp; */
&nbsp;package org.thingsboard.server.common.data;
&nbsp;
&nbsp;import com.fasterxml.jackson.annotation.JsonIgnore;
&nbsp;import com.fasterxml.jackson.core.JsonProcessingException;
&nbsp;import com.fasterxml.jackson.databind.JsonNode;
&nbsp;import io.swagger.v3.oas.annotations.media.Schema;
&nbsp;import lombok.EqualsAndHashCode;
&nbsp;import lombok.Getter;
&nbsp;import lombok.Setter;
&nbsp;import lombok.ToString;
&nbsp;import lombok.extern.slf4j.Slf4j;
&nbsp;import org.thingsboard.server.common.data.device.data.DeviceData;
&nbsp;import org.thingsboard.server.common.data.id.CustomerId;
&nbsp;import org.thingsboard.server.common.data.id.DeviceId;
&nbsp;import org.thingsboard.server.common.data.id.DeviceProfileId;
&nbsp;import org.thingsboard.server.common.data.id.EntityId;
&nbsp;import org.thingsboard.server.common.data.id.OtaPackageId;
&nbsp;import org.thingsboard.server.common.data.id.TenantId;
&nbsp;import org.thingsboard.server.common.data.validation.Length;
&nbsp;import org.thingsboard.server.common.data.validation.NoXss;
&nbsp;
&nbsp;import java.io.ByteArrayInputStream;
&nbsp;import java.io.IOException;
&nbsp;import java.util.Optional;
&nbsp;
&nbsp;@Schema
&nbsp;@EqualsAndHashCode(callSuper = true)
&nbsp;@ToString(callSuper = true)
<b class="fc">&nbsp;@Slf4j</b>
&nbsp;public class Device extends BaseDataWithAdditionalInfo&lt;DeviceId&gt; implements HasLabel, HasTenantId, HasCustomerId, HasOtaPackage, HasVersion, ExportableEntity&lt;DeviceId&gt; {
&nbsp;
&nbsp;    private static final long serialVersionUID = 2807343040519543363L;
&nbsp;
&nbsp;    private TenantId tenantId;
&nbsp;    private CustomerId customerId;
&nbsp;    @NoXss
&nbsp;    @Length(fieldName = &quot;name&quot;)
&nbsp;    private String name;
&nbsp;    @NoXss
&nbsp;    @Length(fieldName = &quot;type&quot;)
&nbsp;    private String type;
&nbsp;    @NoXss
&nbsp;    @Length(fieldName = &quot;label&quot;)
&nbsp;    private String label;
&nbsp;    private DeviceProfileId deviceProfileId;
&nbsp;    private transient DeviceData deviceData;
&nbsp;    @JsonIgnore
&nbsp;    @Getter @Setter
&nbsp;    private byte[] deviceDataBytes;
&nbsp;
&nbsp;    private OtaPackageId firmwareId;
&nbsp;    private OtaPackageId softwareId;
&nbsp;
&nbsp;    @Getter @Setter
&nbsp;    private DeviceId externalId;
&nbsp;    @Getter @Setter
&nbsp;    private Long version;
&nbsp;
&nbsp;    public Device() {
<b class="fc">&nbsp;        super();</b>
&nbsp;    }
&nbsp;
&nbsp;    public Device(DeviceId id) {
<b class="fc">&nbsp;        super(id);</b>
&nbsp;    }
&nbsp;
&nbsp;    public Device(Device device) {
<b class="fc">&nbsp;        super(device);</b>
<b class="fc">&nbsp;        this.tenantId = device.getTenantId();</b>
<b class="fc">&nbsp;        this.customerId = device.getCustomerId();</b>
<b class="fc">&nbsp;        this.name = device.getName();</b>
<b class="fc">&nbsp;        this.type = device.getType();</b>
<b class="fc">&nbsp;        this.label = device.getLabel();</b>
<b class="fc">&nbsp;        this.deviceProfileId = device.getDeviceProfileId();</b>
<b class="fc">&nbsp;        this.setDeviceData(device.getDeviceData());</b>
<b class="fc">&nbsp;        this.firmwareId = device.getFirmwareId();</b>
<b class="fc">&nbsp;        this.softwareId = device.getSoftwareId();</b>
<b class="fc">&nbsp;        this.externalId = device.getExternalId();</b>
<b class="fc">&nbsp;        this.version = device.getVersion();</b>
&nbsp;    }
&nbsp;
&nbsp;    public Device updateDevice(Device device) {
<b class="fc">&nbsp;        this.tenantId = device.getTenantId();</b>
<b class="fc">&nbsp;        this.customerId = device.getCustomerId();</b>
<b class="fc">&nbsp;        this.name = device.getName();</b>
<b class="fc">&nbsp;        this.type = device.getType();</b>
<b class="fc">&nbsp;        this.label = device.getLabel();</b>
<b class="fc">&nbsp;        this.deviceProfileId = device.getDeviceProfileId();</b>
<b class="fc">&nbsp;        this.setDeviceData(device.getDeviceData());</b>
<b class="fc">&nbsp;        this.setFirmwareId(device.getFirmwareId());</b>
<b class="fc">&nbsp;        this.setSoftwareId(device.getSoftwareId());</b>
<b class="fc">&nbsp;        Optional.ofNullable(device.getAdditionalInfo()).ifPresent(this::setAdditionalInfo);</b>
<b class="fc">&nbsp;        this.setExternalId(device.getExternalId());</b>
<b class="fc">&nbsp;        this.setVersion(device.getVersion());</b>
<b class="fc">&nbsp;        return this;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Schema(description = &quot;JSON object with the Device Id. &quot; +
&nbsp;            &quot;Specify this field to update the Device. &quot; +
&nbsp;            &quot;Referencing non-existing Device Id will cause error. &quot; +
&nbsp;            &quot;Omit this field to create new Device.&quot; )
&nbsp;    @Override
&nbsp;    public DeviceId getId() {
<b class="fc">&nbsp;        return super.getId();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Schema(description = &quot;Timestamp of the device creation, in milliseconds&quot;, example = &quot;1609459200000&quot;, accessMode = Schema.AccessMode.READ_ONLY)
&nbsp;    @Override
&nbsp;    public long getCreatedTime() {
<b class="fc">&nbsp;        return super.getCreatedTime();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Schema(description = &quot;JSON object with Tenant Id. Use &#39;assignDeviceToTenant&#39; to change the Tenant Id.&quot;, accessMode = Schema.AccessMode.READ_ONLY)
&nbsp;    public TenantId getTenantId() {
<b class="fc">&nbsp;        return tenantId;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setTenantId(TenantId tenantId) {
<b class="fc">&nbsp;        this.tenantId = tenantId;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Schema(description = &quot;JSON object with Customer Id. Use &#39;assignDeviceToCustomer&#39; to change the Customer Id.&quot;, accessMode = Schema.AccessMode.READ_ONLY)
&nbsp;    public CustomerId getCustomerId() {
<b class="fc">&nbsp;        return customerId;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setCustomerId(CustomerId customerId) {
<b class="fc">&nbsp;        this.customerId = customerId;</b>
&nbsp;    }
&nbsp;
&nbsp;    @JsonIgnore
&nbsp;    public EntityId getOwnerId() {
<b class="fc">&nbsp;        return customerId != null &amp;&amp; !customerId.isNullUid() ? customerId : tenantId;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Schema(requiredMode = Schema.RequiredMode.REQUIRED, description = &quot;Unique Device Name in scope of Tenant&quot;, example = &quot;A4B72CCDFF33&quot;)
&nbsp;    @Override
&nbsp;    public String getName() {
<b class="fc">&nbsp;        return name;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setName(String name) {
<b class="fc">&nbsp;        this.name = name;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Schema(description = &quot;Device Profile Name&quot;, example = &quot;Temperature Sensor&quot;)
&nbsp;    public String getType() {
<b class="fc">&nbsp;        return type;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setType(String type) {
<b class="fc">&nbsp;        this.type = type;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Schema(description = &quot;Label that may be used in widgets&quot;, example = &quot;Room 234 Sensor&quot;)
&nbsp;    public String getLabel() {
<b class="fc">&nbsp;        return label;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setLabel(String label) {
<b class="fc">&nbsp;        this.label = label;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Schema(requiredMode = Schema.RequiredMode.REQUIRED, description = &quot;JSON object with Device Profile Id.&quot;)
&nbsp;    public DeviceProfileId getDeviceProfileId() {
<b class="fc">&nbsp;        return deviceProfileId;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setDeviceProfileId(DeviceProfileId deviceProfileId) {
<b class="fc">&nbsp;        this.deviceProfileId = deviceProfileId;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Schema(description = &quot;JSON object with content specific to type of transport in the device profile.&quot;)
&nbsp;    public DeviceData getDeviceData() {
<b class="fc">&nbsp;        if (deviceData != null) {</b>
<b class="fc">&nbsp;            return deviceData;</b>
&nbsp;        } else {
<b class="fc">&nbsp;            if (deviceDataBytes != null) {</b>
&nbsp;                try {
<b class="fc">&nbsp;                    deviceData = mapper.readValue(new ByteArrayInputStream(deviceDataBytes), DeviceData.class);</b>
&nbsp;                } catch (IOException e) {
<b class="fc">&nbsp;                    log.warn(&quot;Can&#39;t deserialize device data: &quot;, e);</b>
<b class="fc">&nbsp;                    return null;</b>
&nbsp;                }
<b class="fc">&nbsp;                return deviceData;</b>
&nbsp;            } else {
<b class="fc">&nbsp;                return null;</b>
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public void setDeviceData(DeviceData data) {
<b class="fc">&nbsp;        this.deviceData = data;</b>
&nbsp;        try {
<b class="fc">&nbsp;            this.deviceDataBytes = data != null ? mapper.writeValueAsBytes(data) : null;</b>
&nbsp;        } catch (JsonProcessingException e) {
<b class="nc">&nbsp;            log.warn(&quot;Can&#39;t serialize device data: &quot;, e);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Schema(description = &quot;JSON object with Ota Package Id.&quot;)
&nbsp;    public OtaPackageId getFirmwareId() {
<b class="fc">&nbsp;        return firmwareId;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setFirmwareId(OtaPackageId firmwareId) {
<b class="fc">&nbsp;        this.firmwareId = firmwareId;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Schema(description = &quot;JSON object with Ota Package Id.&quot;)
&nbsp;    public OtaPackageId getSoftwareId() {
<b class="fc">&nbsp;        return softwareId;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setSoftwareId(OtaPackageId softwareId) {
<b class="fc">&nbsp;        this.softwareId = softwareId;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Schema(description = &quot;Additional parameters of the device&quot;,implementation = com.fasterxml.jackson.databind.JsonNode.class)
&nbsp;    @Override
&nbsp;    public JsonNode getAdditionalInfo() {
<b class="fc">&nbsp;        return super.getAdditionalInfo();</b>
&nbsp;    }
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2026-02-07 20:03</div>
</div>
</body>
</html>
